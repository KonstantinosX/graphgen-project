<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>GraphGen by KonstantinosX</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">GraphGen</h1>
      <h2 class="project-tagline">Efficient Graph Analytics on top of Relational Data</h2>
      <a href="https://github.com/KonstantinosX/graphgen-project" class="btn">View on GitHub</a>
      <a href="https://github.com/KonstantinosX/graphgen-project/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/KonstantinosX/graphgen-project/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>We are excited to make an initial beta release of GraphGen; a system
towards enabling graph analytics on top of relational datasets. GraphGen allows users to <em>declaratively</em> specify graph extraction tasks over relational databases, visually explore the extracted graphs, and write and execute graph algorithms over them, either directly using our vertex-centric framework or using existing graph libraries like the widely used NetworkX Python library. GraphGen was demonstrated at <em>VLDB 2015</em>; For a few more details see our <a href="http://www.vldb.org/pvldb/vol8/p2032-xirogiannopoulos.pdf">demo paper</a> or view the <a href="https://youtu.be/GDVBLv-oedQ">video</a> that explains the main functionality of the demo and core research challenges in GraphGen. We also have a followup paper in the works so stay tuned!</p>

<p>GraphGen currently only supports <a href="http://www.postgresql.org/">Postgres</a> as the backend relational database.</p>

<h2>
<a id="this-is-cool-but-is-it-really-necessary" class="anchor" href="#this-is-cool-but-is-it-really-necessary" aria-hidden="true"><span class="octicon octicon-link"></span></a>This is cool, but is it really necessary?</h2>

<p>Graph analytics and graph algorithms have proven their worth time and again, having provided substantial value to various different domains like social networks, communication networks, finance, health, and many others. However if the data stored for a particular application is not geared towards some network-specific task or the application itself is not network-centric, users will logically not choose to store their data in a native graph store or in a graph format separating out Nodes and Edges. These users would likely use a conventional, mature and often more reliable relational database. Nevertheless these users may still want to apply these graph analyses onto their data in order to power their application, perhaps though building a machine learning model or just trying to figure out the inner-workings of their company by exploring their inner e-mail network etc. GraphGen is therefore built towards enabling users who have gone with the latter choice to <em>efficiently</em> conduct their desired in-memory graph analyses on the data stored in their normalized relational databases without the need to manually go through time and money consuming ETL processes with often sub-optimal results.</p>

<p>Through its simplicity and intuitiveness, GraphGen <em>opens up</em> graph analytics on any relational dataset by enabling exploration of different types of graphs that can be inferred just by inspecting the schema. If you can think of entities and relationships between them that exist in your schema, you can build a graph out of it!</p>

<h2>
<a id="using-graphgen-with-python" class="anchor" href="#using-graphgen-with-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using GraphGen with Python</h2>

<p>The easiest way to try out GraphGen is probably in Python through <code>graphgenpy</code>; a Python wrapper library for executing graph extraction queries in our custom DSL which is based on Datalog. The graphs that result from the extraction query are serialized to disk in a standard format and can then be <em>loaded</em> into other graph libraries like <a href="https://networkx.github.io/"><code>NetworkX</code></a> for further analysis.</p>

<h3>
<a id="installing-graphgenpy" class="anchor" href="#installing-graphgenpy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing graphgenpy</h3>

<p>To install graphgenpy onto your system, simply download the graphgen-pkg, and run:
<code>python setup.py install</code></p>

<p>After that you can immediately use graphgenpy to extract and serialize your graphs onto disk and use them as you please.</p>

<p><strong>Example:</strong></p>

<p>You an use the following script to load up a toy version of the dblp dataset to play around with </p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> psycopg2
<span class="pl-k">from</span> psycopg2.extensions <span class="pl-k">import</span> ISOLATION_LEVEL_AUTOCOMMIT
<span class="pl-k">import</span> pprint
<span class="pl-k">import</span> sys

username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>kostasx<span class="pl-pds">"</span></span>; <span class="pl-c">#&lt;&lt; postgres username</span>
password <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>testdb<span class="pl-pds">"</span></span>; <span class="pl-c">#&lt;&lt; postgres password</span>
dbname <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>testgraphgen<span class="pl-pds">"</span></span>; <span class="pl-c">#&lt;&lt; change this name if you already have a valuable database with that name...I think it's safe you assume you don't</span>

<span class="pl-c"># create the new test database</span>
<span class="pl-k">try</span>:
    conn <span class="pl-k">=</span> psycopg2.connect(<span class="pl-s"><span class="pl-pds">"</span>dbname='postgres' user=<span class="pl-pds">"</span></span><span class="pl-k">+</span>username<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span> host = 'localhost' password=<span class="pl-pds">"</span></span><span class="pl-k">+</span>password)
<span class="pl-k">except</span>:
    <span class="pl-k">print</span> <span class="pl-s"><span class="pl-pds">"</span>I am unable to connect to Postgres.<span class="pl-pds">"</span></span>

conn.set_isolation_level(ISOLATION_LEVEL_AUTOCOMMIT)
cur <span class="pl-k">=</span> conn.cursor()
cur.execute(<span class="pl-s"><span class="pl-pds">"</span>DROP DATABASE <span class="pl-pds">"</span></span><span class="pl-k">+</span>dbname<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)
cur.execute(<span class="pl-s"><span class="pl-pds">"</span>CREATE DATABASE <span class="pl-pds">"</span></span><span class="pl-k">+</span>dbname<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)

<span class="pl-c"># connect to the newly created database</span>
<span class="pl-k">try</span>:
    conn <span class="pl-k">=</span> psycopg2.connect(<span class="pl-s"><span class="pl-pds">"</span>dbname='<span class="pl-pds">"</span></span><span class="pl-k">+</span>dbname<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>' user=<span class="pl-pds">"</span></span><span class="pl-k">+</span>username<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span> host='localhost' password=<span class="pl-pds">"</span></span><span class="pl-k">+</span>password<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)
<span class="pl-k">except</span>:
    <span class="pl-k">print</span> <span class="pl-s"><span class="pl-pds">"</span>I am unable to connect to the database<span class="pl-pds">"</span></span>

cur <span class="pl-k">=</span> conn.cursor()
<span class="pl-k">try</span>:
    authorTable <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>CREATE TABLE author (id <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,name <span class="pl-k">character varying</span>(<span class="pl-c1">1024</span>))<span class="pl-pds">"</span></span>
    cur.execute(authorTable)

    conference <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>CREATE TABLE conference (id <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,name <span class="pl-k">character varying</span>(<span class="pl-c1">1024</span>),year <span class="pl-k">integer</span>,location <span class="pl-k">character varying</span>(<span class="pl-c1">1024</span>));<span class="pl-pds">"</span></span>
    cur.execute(conference)

    pub <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>CREATE TABLE publication (id <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,title <span class="pl-k">character varying</span>(<span class="pl-c1">2048</span>),cid <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">REFERENCES</span> conference(id));<span class="pl-pds">"</span></span>
    cur.execute(pub)

    authorpub <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>CREATE TABLE authorpublication (aid <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span>  <span class="pl-k">REFERENCES</span> author(id), pid <span class="pl-k">integer</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">REFERENCES</span> publication(id), <span class="pl-k">PRIMARY KEY</span>(aid,pid));<span class="pl-pds">"</span></span>
    cur.execute(authorpub)

    <span class="pl-c"># # execute our Query</span>
    authors <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span><span class="pl-k">INSERT INTO</span> author (id, name) <span class="pl-k">VALUES</span></span>
<span class="pl-s">        (<span class="pl-c1">1</span>,<span class="pl-s"><span class="pl-pds">'</span>Anindya Datta<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">'</span>Heiko Schuldt<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">3</span>,<span class="pl-s"><span class="pl-pds">'</span>Sandeepan Banerjee<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">4</span>,<span class="pl-s"><span class="pl-pds">'</span>Christophe Bobineau<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">5</span>,<span class="pl-s"><span class="pl-pds">'</span>Sangyong Hwang<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">6</span>,<span class="pl-s"><span class="pl-pds">'</span>Tirthankar Lahiri<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">7</span>,<span class="pl-s"><span class="pl-pds">'</span>Evangelos Eleftheriou<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">8</span>,<span class="pl-s"><span class="pl-pds">'</span>Quan Z. Sheng<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">9</span>,<span class="pl-s"><span class="pl-pds">'</span>Egemen Tanin<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">10</span>,<span class="pl-s"><span class="pl-pds">'</span>Brandon Lloyd<span class="pl-pds">'</span></span>);<span class="pl-pds">"""</span></span>
    cur.execute(authors)

    conferences <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span> <span class="pl-k">INSERT INTO</span> conference (id, name,year,location) <span class="pl-k">VALUES</span></span>
<span class="pl-s">        (<span class="pl-c1">49</span>,<span class="pl-s"><span class="pl-pds">'</span>VLDB<span class="pl-pds">'</span></span>,<span class="pl-c1">2014</span>,<span class="pl-s"><span class="pl-pds">'</span>Hangzhou, China<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">87</span>,<span class="pl-s"><span class="pl-pds">'</span>VLDB<span class="pl-pds">'</span></span>,<span class="pl-c1">2015</span>,<span class="pl-s"><span class="pl-pds">'</span>Kailua Kona, HI USA<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">84</span>,<span class="pl-s"><span class="pl-pds">'</span>SIGMOD<span class="pl-pds">'</span></span>,<span class="pl-c1">2014</span>,<span class="pl-s"><span class="pl-pds">'</span>Snowbird, Utah<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">36</span>,<span class="pl-s"><span class="pl-pds">'</span>SIGMOD<span class="pl-pds">'</span></span>,<span class="pl-c1">2015</span>,<span class="pl-s"><span class="pl-pds">'</span>Melbourne, Australia<span class="pl-pds">'</span></span>),</span>
<span class="pl-s">        (<span class="pl-c1">59</span>,<span class="pl-s"><span class="pl-pds">'</span>CIDR<span class="pl-pds">'</span></span>,<span class="pl-c1">2015</span>,<span class="pl-s"><span class="pl-pds">'</span>Asilomar, CA USA<span class="pl-pds">'</span></span>);<span class="pl-pds">"""</span></span>
    cur.execute(conferences)

    publications <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span> <span class="pl-k">INSERT INTO</span> publication (id, title,cid) <span class="pl-k">VALUES</span></span>
<span class="pl-s">        (<span class="pl-c1">8</span>,<span class="pl-s"><span class="pl-pds">'</span>Title 1.<span class="pl-pds">'</span></span>,<span class="pl-c1">49</span>),</span>
<span class="pl-s">        (<span class="pl-c1">15</span>,<span class="pl-s"><span class="pl-pds">'</span>Title 2.<span class="pl-pds">'</span></span>,<span class="pl-c1">87</span>),</span>
<span class="pl-s">        (<span class="pl-c1">25</span>,<span class="pl-s"><span class="pl-pds">'</span>Title 3.<span class="pl-pds">'</span></span>,<span class="pl-c1">84</span>),</span>
<span class="pl-s">        (<span class="pl-c1">44</span>,<span class="pl-s"><span class="pl-pds">'</span>Title 4.<span class="pl-pds">'</span></span>,<span class="pl-c1">36</span>),</span>
<span class="pl-s">        (<span class="pl-c1">64</span>,<span class="pl-s"><span class="pl-pds">'</span>Title 5.<span class="pl-pds">'</span></span>,<span class="pl-c1">59</span>);</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span>
    cur.execute(publications)
    authorpubs <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span><span class="pl-k">INSERT INTO</span> authorpublication (aid, pid) <span class="pl-k">VALUES</span></span>
<span class="pl-s">        (<span class="pl-c1">1</span>,<span class="pl-c1">8</span>),</span>
<span class="pl-s">        (<span class="pl-c1">1</span>,<span class="pl-c1">64</span>),</span>
<span class="pl-s">        (<span class="pl-c1">1</span>,<span class="pl-c1">44</span>),</span>
<span class="pl-s">        (<span class="pl-c1">2</span>,<span class="pl-c1">8</span>),</span>
<span class="pl-s">        (<span class="pl-c1">3</span>,<span class="pl-c1">15</span>),</span>
<span class="pl-s">        (<span class="pl-c1">4</span>,<span class="pl-c1">15</span>),</span>
<span class="pl-s">        (<span class="pl-c1">5</span>,<span class="pl-c1">25</span>),</span>
<span class="pl-s">        (<span class="pl-c1">5</span>,<span class="pl-c1">44</span>),</span>
<span class="pl-s">        (<span class="pl-c1">6</span>,<span class="pl-c1">25</span>),</span>
<span class="pl-s">        (<span class="pl-c1">7</span>,<span class="pl-c1">25</span>),</span>
<span class="pl-s">        (<span class="pl-c1">7</span>,<span class="pl-c1">8</span>),</span>
<span class="pl-s">        (<span class="pl-c1">8</span>,<span class="pl-c1">44</span>),</span>
<span class="pl-s">        (<span class="pl-c1">9</span>,<span class="pl-c1">64</span>),</span>
<span class="pl-s">        (<span class="pl-c1">10</span>,<span class="pl-c1">64</span>),</span>
<span class="pl-s">        (<span class="pl-c1">10</span>,<span class="pl-c1">44</span>),</span>
<span class="pl-s">        (<span class="pl-c1">10</span>,<span class="pl-c1">8</span>),</span>
<span class="pl-s">        (<span class="pl-c1">3</span>,<span class="pl-c1">64</span>);<span class="pl-pds">"""</span></span>
    cur.execute(authorpubs)

    conn.commit();
    cur.close()
    conn.close()
<span class="pl-k">except</span>:
    <span class="pl-k">print</span> <span class="pl-s"><span class="pl-pds">"</span>Unexpected error:<span class="pl-pds">"</span></span>, sys.exc_info()[<span class="pl-c1">0</span>]
</pre></div>

<p>After having a dataset, using <code>graphgen</code> is simple</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> graphgenpy <span class="pl-k">import</span> GraphGenerator
<span class="pl-k">import</span> networkx <span class="pl-k">as</span> nx

datalogQuery <span class="pl-k">=</span> 
<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">Nodes(ID, Name) :- Author(ID, Name).</span>
<span class="pl-s">Edges(ID1, ID2) :- AuthorPub(ID1, PubID), AuthorPub(ID2, PubID).</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>

<span class="pl-c"># Credentials for connecting to the database</span>
gg <span class="pl-k">=</span> GraphGenerator(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>dbname<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>)

<span class="pl-c"># Evaluate graph extraction query and serialize the resulting graph to disk in a standard format. Return the file's name in the FS</span>
fname <span class="pl-k">=</span> gg.generateGraph(datalogQuery,filename,GraphGenerator.GRAPHML)

<span class="pl-c"># Load graph into NetworkX</span>
G <span class="pl-k">=</span> nx.read_graphml(fname)
<span class="pl-k">print</span> <span class="pl-s"><span class="pl-pds">"</span>Graph Loaded into NetworkX! Running PageRank...<span class="pl-pds">"</span></span>

<span class="pl-c"># Run any algorithm on the graph using NetowrkX</span>
nx.pagerank(G)
<span class="pl-k">print</span> <span class="pl-s"><span class="pl-pds">"</span>Done!<span class="pl-pds">"</span></span></pre></div>

<h2>
<a id="sounds-great-but-how-do-i-write-queries" class="anchor" href="#sounds-great-but-how-do-i-write-queries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sounds great, but how do I write queries??</h2>

<p>We have defined a declarative language based on <em>Datalog</em> through which users are able to express graph extraction queries by expressing how the nodes and the edges should be projected from the database.</p>

<p>Assume a <em>dblp</em> database with the following tables:</p>

<ul>
<li>Author</li>
<li>Publication</li>
<li>AuthorPub</li>
<li>Conference</li>
</ul>

<p><strong>Extract a graph where authors are connected to each other if they've published a paper together:</strong></p>

<div class="highlight highlight-source-java"><pre>
Nodes(<span class="pl-c1">ID</span>, <span class="pl-smi">Name</span>) <span class="pl-k">:</span><span class="pl-k">-</span> Author(<span class="pl-c1">ID</span>, <span class="pl-smi">Name</span>)<span class="pl-c1">.</span>

Edges(<span class="pl-c1">ID1</span>, <span class="pl-c1">ID2</span>) <span class="pl-k">:</span><span class="pl-k">-</span> AuthorPub(<span class="pl-c1">ID1</span>, <span class="pl-smi">PubID</span>), AuthorPub(<span class="pl-c1">ID2</span>, <span class="pl-smi">PubID</span>)<span class="pl-c1">.</span>
</pre></div>

<p>Let's take a look at how this query is formulated!</p>

<p><img src="https://docs.google.com/drawings/d/17obOWt2DYJtX0-NwIESSK8n7fSLrcAvrsJ4fxsPqpk8/pub?w=853&amp;h=337" alt="DBLP Schema"></p>

<p>There are two different types of <em>atoms</em> (which is Datalog for predicates or table names) that can exist on the left hand side of each query; <code>Nodes</code> and <code>Edges</code>. In the current iteration of GraphGen we are supporting properties <em>only</em> on the <code>Nodes</code>, so no support for <code>Edge</code> properties for now. These <code>Node</code> properties can be selected from the right-hand side and listed after the <code>ID</code> in the <code>Nodes</code> arguments. Note that the ID <em>must</em> be the first constant in the arguments. The right hand side consists of all the atoms, and the variables and predicates involved in the query.</p>

<p>Let's break down this specific query which yields the co-authorship graph.</p>

<p>In the first line we are expressing how to project the Nodes in our graph. Here, the <code>Nodes</code> are selected from the <code>Author</code> table where their Id (<code>ID</code>) would be each distinct <code>aid</code> in the <code>Author</code> table (the ordering of the arguments mirrors the ordering of the attributes of an atom in its adjacent table); We are therefore creating a Node for every Author, and including the <code>name</code> attribute in the table as a Node property (aliased <code>Name</code>). <strong>Note that the Node ID needs to be <em>unique</em>.</strong></p>

<p>The second line describes how each two <code>Nodes</code> will be connected to eachother, hence the graph's <code>Edges</code>. This line expresses that Node with <code>ID1</code> and <code>ID2</code> will be connected to each other, if there exists tuples in the AuthorPublication relation where they have the same publication id (<code>PubID</code>). <strong>Note that <code>ID1</code> and <code>ID2</code> both have to refer to the same exact range of identifiers dictated by the ones we have given to the <code>Nodes</code> of the graph.</strong></p>

<p>The most exciting aspect about GraphGen is that by inspecting the schema users can envision various different ways that <code>Nodes</code> can be defined, as well as ways that these nodes can be connected to each other. For example from this</p>

<p>Another (slightly more complex) example would be using the well known <em>imdb</em> database which amongst others includes the following tables in its schema:</p>

<ul>
<li>cast_info : Contains all information on the cast and crew of all movies</li>
<li>role_type : Contains the role_ids and their names</li>
<li>name : Contains the names of all cast and crew of all movies</li>
</ul>

<p><strong>Extract a graph where actors are connected to each other if they've played in the same movie</strong></p>

<div class="highlight highlight-source-java"><pre>
Nodes(id, name) <span class="pl-k">:</span><span class="pl-k">-</span> name(id, name), cast_info(_, id , _, role_id),
role_type(role_id, role_name), role_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>actor<span class="pl-pds">"</span></span><span class="pl-c1">.</span>

Edges(id1, id2) <span class="pl-k">:</span><span class="pl-k">-</span> cast_info(_, id1, movie_id),
cast_info(_, id2, movie_id, role_id), role_type(role_id, role_name),
role_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>actor<span class="pl-pds">"</span></span><span class="pl-c1">.</span>
</pre></div>

<p>The first line creates a node for every person in the dataset that has been in a movie as an actor, and the second one creates links between these actors if they've played in the same movie together.</p>

<p><strong>A few things to keep in mind</strong>:</p>

<ul>
<li>Think of each line of code as a single expression.</li>
<li>The first thing in the parameters of the <em>Nodes</em> atoms should be the ID of the chosen node type and should be <strong>unique</strong>
</li>
</ul>

<h2>
<a id="using-graphgen-with-java" class="anchor" href="#using-graphgen-with-java" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using GraphGen with Java</h2>

<p>GraphGen is written in Java and through it, we support space efficient in-memory analytics on the extracted graph through user defined vertex-centric programs. In order to use GraphGen in Java you need to import the GraphGen library located at :
<code>graphgenpy/lib/GraphGen-0.0.5-SNAPSHOT-jar-with-dependencies.jar</code></p>

<p><strong>Example:</strong></p>

<div class="highlight highlight-source-java"><pre>
<span class="pl-c">// Establish Connection to Database</span>
<span class="pl-smi">GraphGenerator</span> ggen <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">GraphGenerator</span>(<span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>dbName<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>);

<span class="pl-c">// Define and evaluate a single graph extraction query</span>
<span class="pl-smi">String</span> datalog_query <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>;
<span class="pl-smi">Graph</span> g <span class="pl-k">=</span> ggen<span class="pl-k">.</span>generateGraph(datalog_query)<span class="pl-k">.</span>get(<span class="pl-c1">0</span>);

<span class="pl-c">// Initialize vertec-centric object</span>
<span class="pl-smi">VertexCentric</span> p <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">VertexCentric</span>(g);

<span class="pl-c">// Define vertex-centric compute function</span>
<span class="pl-smi">Executor</span> program <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Executor</span>(<span class="pl-s"><span class="pl-pds">"</span>result_value_name<span class="pl-pds">"</span></span>) {
 <span class="pl-k">@Override</span>
 <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">compute</span>(<span class="pl-smi">Vertex</span> <span class="pl-v">v</span>, <span class="pl-smi">VertexCentric</span> <span class="pl-v">p</span>) {
    <span class="pl-c">// implementation of compute function</span>
  }
};
<span class="pl-c">// Begin execution</span>
p<span class="pl-k">.</span>run(program);
</pre></div>

<h2>
<a id="how-do-i-write-vertex-centric-programs" class="anchor" href="#how-do-i-write-vertex-centric-programs" aria-hidden="true"><span class="octicon octicon-link"></span></a>How Do I write vertex-centric Programs??</h2>

<p>There are only a few things that users need to know about when writing vertex centric programs using the GraphGen framework:</p>

<p><strong>1. Iterating over the current vertex's  neighbors</strong></p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// v is the current vertex</span>
<span class="pl-k">for</span> (<span class="pl-smi">Vertex</span> e <span class="pl-k">:</span> v<span class="pl-k">.</span>getVertices(<span class="pl-smi">Direction</span><span class="pl-c1"><span class="pl-k">.</span>BOTH</span>)) {
  <span class="pl-c">//...</span>
}</pre></div>

<p><strong>2. Setting the value for the current vertex</strong></p>

<div class="highlight highlight-source-java"><pre>v<span class="pl-k">.</span>setVal(<span class="pl-c1">...</span>);</pre></div>

<p><strong>3. Getting the current Superstep</strong></p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span> s <span class="pl-k">=</span> p<span class="pl-k">.</span>getSuperstep()</pre></div>

<p><strong>4. Fetching one of the node's properties</strong></p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span> degree <span class="pl-k">=</span> v<span class="pl-k">.</span>getProperty(<span class="pl-s"><span class="pl-pds">"</span>Degree<span class="pl-pds">"</span></span>);</pre></div>

<p><strong>5. Voting the node to a halt</strong></p>

<div class="highlight highlight-source-java"><pre>p<span class="pl-k">.</span>voteToHalt(v);</pre></div>

<h3>
<a id="example-of-pagerank-calculation-using-graphgen-30-iterations" class="anchor" href="#example-of-pagerank-calculation-using-graphgen-30-iterations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example of <em>PageRank</em> Calculation using GraphGen (30 iterations)</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Initialize vertec-centric object</span>
<span class="pl-smi">VertexCentric</span> p <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">VertexCentric</span>(g);

<span class="pl-c">//The property id for the result will be "PageRank"</span>
<span class="pl-smi">Executor</span> pagerank <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Executor</span>(<span class="pl-s"><span class="pl-pds">"</span>PageRank<span class="pl-pds">"</span></span>) {
<span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">compute</span>(<span class="pl-smi">Vertex</span> <span class="pl-v">v</span>, <span class="pl-smi">VertexCentric</span> <span class="pl-v">p</span>) {
 <span class="pl-smi">GenVertex</span> gv <span class="pl-k">=</span> ((<span class="pl-smi">GenVertex</span>) v);
 <span class="pl-k">int</span> degree <span class="pl-k">=</span> v<span class="pl-k">.</span>getProperty(<span class="pl-s"><span class="pl-pds">"</span>Degree<span class="pl-pds">"</span></span>);

 <span class="pl-k">if</span> (p<span class="pl-k">.</span>getSuperstep() <span class="pl-k">==</span> <span class="pl-c1">0</span>) {
  gv<span class="pl-k">.</span>setVal(<span class="pl-c1">1.0</span> <span class="pl-k">/</span> degree); <span class="pl-c">// initialize</span>
 }

 <span class="pl-k">if</span> (p<span class="pl-k">.</span>getSuperstep() <span class="pl-k">&gt;=</span> <span class="pl-c1">1</span>) {
  <span class="pl-k">double</span> sum <span class="pl-k">=</span> <span class="pl-c1">0</span>;
  <span class="pl-k">for</span> (<span class="pl-smi">Vertex</span> e <span class="pl-k">:</span> v<span class="pl-k">.</span>getVertices(<span class="pl-smi">Direction</span><span class="pl-c1"><span class="pl-k">.</span>BOTH</span>)) {
  sum <span class="pl-k">+=</span> (<span class="pl-k">double</span>) ((<span class="pl-smi">GenVertex</span>) e)<span class="pl-k">.</span>getPrevVal();
 }

  <span class="pl-k">double</span> newPageRank <span class="pl-k">=</span> <span class="pl-c1">0.15</span> <span class="pl-k">/</span> p<span class="pl-k">.</span>getNumOfVertices() <span class="pl-k">+</span> <span class="pl-c1">0.85</span> <span class="pl-k">*</span> sum;
  gv<span class="pl-k">.</span>setVal(newPageRank <span class="pl-k">/</span> degree);
 }

 <span class="pl-k">if</span> (p<span class="pl-k">.</span>getSuperstep() <span class="pl-k">==</span> <span class="pl-c1">30</span>) {
  gv<span class="pl-k">.</span>setVal((<span class="pl-k">double</span>) gv<span class="pl-k">.</span>getPrevVal() <span class="pl-k">*</span> degree);
  p<span class="pl-k">.</span>voteToHalt(gv);
 }
}
};

<span class="pl-c">//Run</span>
p<span class="pl-k">.</span>run(pagerank);</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/KonstantinosX/graphgen-project">GraphGen</a> is maintained by <a href="https://github.com/KonstantinosX">KonstantinosX</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
